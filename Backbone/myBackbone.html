<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Dylan's users</title>
</head>
<body>
  <div id="container-menu">
      <ul>
          <li><a href="#add">Home</a></li>
          <li><a href="#search">Search</a></li>
          <li><a href="#users">Users</a></li>
      </ul>
  </div>

  <div id = "container">Loading...</div>
  <div id = "footer"></div>

  <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.1/backbone-min.js"></script> -->
  <script src="../lib/jquery-3.2.1.min.js" type="text/javascript"></script>
  <script src="../lib/underscore.js" type="text/javascript"></script>
  <script src="../lib/backbone.js" type="text/javascript"></script>
  <script src="../lib/bootstrap.js" type="text/javascript"></script>


  <script type="text/javascript">
    'use strict';


    // master object
    var app = {
      Views: {},
      Models: {},
      Collections: {},
      Router: {}
    };








    //model
    app.Models.Users = Backbone.Model.extend({
        initialize: function(options) {
            console.log(options);
        }
    });

    //Collection
    var Users = Backbone.Collection.extend({
      initialize: function(options) {
        if (options.id){
          this.id = options.id;
        }
      },
      url: function(){
        return "http://localhost:3000/user/"+id;
      }
    });









    //views
    app.Views.AppView = Backbone.View.extend({
      initialize: function(options) {}
    });

    app.Views.Home = Backbone.View.extend({
      //el: '#container',
      initialize: function(options){
        this.render();
      },
      render: function(){
        this.$el.html("<h1>Home</h1>");
        return this;
      }
    });



    app.Views.Search = Backbone.View.extend({
      //el: '#container',
      template: "<input type='text' placeholder='id'> \
                <button>fetch</button> \
                <p id='username'></p><p id='email'></p>",
      initialize: function(options){
        this.render();
      },
      render: function(){
        this.$el.html(this.template);
        return this;
      },
      getUsers: function(){
        var id = this.$el.find('input').val();
        var users = new app.Collection.Users({id: id});
        users.fetch();
      },
      events: {
        'click button':'getUsers'
      }
    });




    app.Views.Users = Backbone.View.extend({
      initialize: function(options){
        this.render();
      },
      render: function(){
        this.$el.html("<h1>Users</h1>");
        return this;
      }
    });









    //router
    app.Router = Backbone.Router.extend({
      routes:{
        'home': 'home',
        'search': 'search',
        'users': 'users',
        '*path': 'home'
      },
      home: function(){
        var view = new app.Views.Home();
        $('#container').html(view.render().el);
      },
      search: function(){
        var view = new app.Views.Search();
        $('#container').html(view.render().el);
      },
      users: function(){
        var view = new app.Views.Users();
        $('#container').html(view.render().el);
      }
    });


    $(document).ready(function(){
        app.Router.Instance = new app.Router();
        Backbone.history.start();
    });



  </script>

</body>
</html>
